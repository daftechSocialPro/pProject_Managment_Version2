<div class="modal-content"  >
    <div class="modal-header">
        <h5 class="modal-title">Raise Issue</h5>
        <button type="button" class="btn-close" id="ModalClose" (click)="closeModal()" aria-label="Close"></button>
    </div>

        <div class="card-body">
                <form class="" [formGroup]="caseForm" (ngSubmit)="submit()">
                    <div class="modal-body">
                        <div class="row g-3">

                            <div class="col-md-3">
                                <div class="form-floating">
                                    <select class="form-select" id="caseId" 
                                    formControlName="caseId" #selectedcas (change)="setSelectedList(selectedcas.value)" >
                                    <option value=""></option>
                                    <option *ngFor="let case of caseList" [value]="case.Id"  > {{case.CaseNumber}}  </option>   
                                    </select>
                                    <label for="selectwho">Cases List</label>
                                </div>
                                <div class="modal-content mt-2 " *ngIf="selectedCase" >
                                    <div class="modal-header bg-secondary text-white">
                                       <h5 class="modal-title">Tips</h5>
                                    </div>
                     
                                    <div class="modal-body" >
                                       <div class=" text-left">{{selectedCase.CaseNumber!}}</div>
                                       <!-- <div class="text-center">{{plan?.ProgramBudgetYear}}</div>  -->
                     
                                       <div class=" text-left" >
                                        <span class="">{{selectedCase.CreatedAt|date:"MMMM d, YYYY"}}</span> 
                                     </div>
                                       <div class="text-left">
                                          <span class=""> Applicant : {{selectedCase.ApplicantName!}}</span> <br />
                                          <span class=""> Responsible : {{selectedCase.ToEmployeeId!}}</span> <br />
                                          <span class=""> CaseTypeName : {{selectedCase.CaseTypeName!}} </span>
                                       </div>
                                    </div>
                                 </div>
                                
                            </div>
                            <div class="col-md-3">
                                <div class="form-floating">
                                    <select class="form-select" id="selectwho" 
                                    formControlName="selectwho" #who >
                                    <option value="0">To Structure</option>
                                    <option value="1">To Employee</option>
                                </select>
                                    <label for="selectwho">Select Whom You Want To Assign </label>
                                </div>
                            </div>
                            <div class="col-md-3">

                                <div class="form-floating mb-3" >
                                    <select class="form-select" id="branch" #branch (change)="getStructures(branch.value)"
                                  >
                                   <option value=""></option>
                                    <option *ngFor="let branch of Branches" [value]="branch.Id"  > {{branch.Name}}  </option>   
                                </select>
                                    <label for="branch">Brnaches</label>
                                </div>
                                <div class="form-floating mb-3" >
                                    <select class="form-select" id="Structure" #structure  (change)="getEmployees(structure.value)"
                                    formControlName="Structure">
                                    <option value=""></option>
                                    <option *ngFor="let structure of Structures" [value]="structure.Id"> {{structure.Name}}</option>   
                                </select>
                                    <label for="Structure">Structure</label>
                                </div>
                                <div class="form-floating " *ngIf="who.value=='1'">
                                    <select class="form-select" id="ForEmployee" 
                                    formControlName="ForEmployee">
                                    <option value=""></option>
                                    <option *ngFor="let employee of Employees" [value]="employee.Id"> {{employee.Name}}</option>   
                                  </select>
                                    <label for="ForEmployee">For Employee</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-floating">
                                   <select class="form-control" formControlName="CCto"
                                    placeholder="General Manager"  id="CCto" >
                                    <option value=""></option>
                                    <option *ngFor="let structure of Structures" [value]="structure.Id"> {{structure.Name}}</option>   
                                   </select>
                                  <label for="CCto">CC to</label>

                                  <div class="col-12 mt-2">
                                    <div class="form-floating"><textarea class="form-control" formControlName="Remark"
                                            placeholder="Address" id="Remark" style="height: 120px;"></textarea><label
                                            for="Remark">Remark</label>
                                    </div>
                                </div>
                                    
                            </div>
                            
                            </div>

                       
                      

                        </div>

                    </div>
                    <div class="modal-footer"> <button type="button" class="btn btn-secondary"
                            (click)="closeModal()">Close</button>
                        <button type="button" type="submit" [disabled]="!caseForm.valid"
                            class="btn btn-danger">Raise</button>
                    </div>
                </form>


              
            


        </div>

</div>
 
    







